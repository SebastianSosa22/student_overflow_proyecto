<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pregunta - StudentOverflow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilo adicional para el menú desplegable */
        .dropdown-menu {
            display: none;
        }

        .dropdown-menu.show {
            display: block;
        }
    </style>
</head>

<body class="bg-gray-100">
    <header class="bg-white shadow-sm py-4 sticky top-0">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-800"><a href="/">StudentOverflow</a></h1>
            <div class="relative">
                <div class="flex items-center space-x-4 cursor-pointer" id="userMenu" onclick="toggleDropdown()">
                    <!-- Nombre del usuario -->
                    <span class="text-gray-700 font-medium">{{ session['username'] }}</span>
                    <!-- Foto del usuario -->
                    <img src="https://via.placeholder.com/40" alt="Foto de perfil"
                        class="w-10 h-10 rounded-full border border-gray-300">
                </div>

                <!-- Menú desplegable -->
                <div id="dropdownMenu"
                    class="dropdown-menu absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg py-2">
                    <a href="/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Perfil</a>
                    <a href="/settings" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Configuración</a>
                    <a href="/logout" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Cerrar sesión</a>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto mt-8">
        <!-- Flecha de Regreso -->
        <div class="mb-4">
            <a href="javascript:history.back()" class="flex items-center text-gray-700 hover:text-gray-900">
                <!-- Ícono de flecha hacia la izquierda -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Regresar
            </a>
        </div>

        <!-- Pregunta -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-8">
            <div class="mb-4">
                <span class="text-gray-700 font-semibold text-lg">123 Votos</span>
                <span class="text-gray-500 text-lg">5 Respuestas</span>
            </div>
            <h2 class="text-3xl font-bold text-orange-400">Lorem ipsum dolor sit amet.</h2>
            <p class="text-gray-600 mt-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin lacinia
                pharetra dapibus. Curabitur eu sapien lacus. Etiam venenatis felis non ultricies fermentum. Aenean
                luctus laoreet justo, nec tincidunt turpis efficitur sit amet. Proin placerat volutpat.</p>
            <div class="flex space-x-2 mt-4">
                <span class="bg-gray-200 text-gray-600 px-3 py-1 rounded-full text-sm">Física</span>
                <span class="bg-gray-200 text-gray-600 px-3 py-1 rounded-full text-sm">Química</span>
            </div>
            <div class="flex justify-between items-center mt-6 border-t pt-4">
                <div class="flex items-center">
                    <span class="text-gray-600 font-semibold">{{ session['username'] }}</span>
                    <span class="text-gray-500 ml-4">Hace 2 min</span>
                </div>
            </div>
        </div>

        <!-- Formulario de Respuesta -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <h3 class="text-xl font-semibold text-gray-800">Tu respuesta</h3>
            <p class="text-gray-500 mb-4">Mínimo 20 caracteres.</p>
            <textarea id="respuestaTextarea" placeholder="Placeholder" rows="6" maxlength="500"
                class="w-full p-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent resize-none mb-2"></textarea>
            <p id="errorMensaje" class="text-red-500 hidden">Tu respuesta debe tener al menos 20 caracteres.</p>
            <div class="flex justify-between items-center">
                <span id="caracteresContador" class="text-gray-500 text-sm">0/500</span>
                <button id="publicarButton"
                    class="bg-orange-400 text-white font-medium py-2 px-4 rounded-md hover:bg-orange-500">Publica tu
                    Respuesta</button>
            </div>
        </div>
    </main>

    <script>
        function toggleDropdown() {
            var dropdownMenu = document.getElementById("dropdownMenu");
            dropdownMenu.classList.toggle("show");
        }

        // Cerrar el menú si se hace clic fuera de él
        window.onclick = function (event) {
            var dropdownMenu = document.getElementById("dropdownMenu");
            if (!event.target.closest('#userMenu')) {
                if (dropdownMenu.classList.contains('show')) {
                    dropdownMenu.classList.remove('show');
                }
            }
        }

        // Validar longitud de la respuesta
        const respuestaTextarea = document.getElementById('respuestaTextarea');
        const publicarButton = document.getElementById('publicarButton');
        const errorMensaje = document.getElementById('errorMensaje');
        const caracteresContador = document.getElementById('caracteresContador');

        respuestaTextarea.addEventListener('input', function () {
            const respuestaLength = respuestaTextarea.value.length;
            caracteresContador.textContent = `${respuestaLength}/500`;

            if (respuestaLength >= 20) {
                errorMensaje.classList.add('hidden');
            } else {
                errorMensaje.classList.remove('hidden');
            }
        });

        publicarButton.addEventListener('click', function (event) {
            const respuestaLength = respuestaTextarea.value.length;

            if (respuestaLength < 20) {
                event.preventDefault();
                errorMensaje.classList.remove('hidden');
            }
        });

    </script>
</body>

</html>